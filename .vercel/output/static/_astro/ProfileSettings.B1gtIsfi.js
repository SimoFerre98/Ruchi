import{c as s,s as d,j as e,L as M}from"./loader-circle.C62Pet54.js";import{r}from"./index.BfkTPTwy.js";import{c as p}from"./utils.Bo6l8oUH.js";import{U as b}from"./user.DA9NWBCA.js";import{L as S}from"./lock.DN0fU6r5.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_=s("arrow-left",L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],P=s("log-out",E);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],f=s("monitor",C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],U=s("moon",I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$=s("save",H);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],z=s("sun",q);function F(){const[o,m]=r.useState("system"),[g,h]=r.useState(""),[n,x]=r.useState(""),[u,y]=r.useState(!1),[i,l]=r.useState(null),[k,w]=r.useState(null);r.useEffect(()=>{const t=localStorage.getItem("theme");t&&m(t),v()},[]),r.useEffect(()=>{const t=window.document.documentElement;if(t.classList.remove("light","dark"),o==="system"){const a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t.classList.add(a),localStorage.removeItem("theme")}else t.classList.add(o),localStorage.setItem("theme",o)},[o]);async function v(){try{const{data:{user:t}}=await d.auth.getUser();if(!t){window.location.href="/login";return}w(t);const{data:a,error:c}=await d.from("profiles").select("username").eq("id",t.id).single();a&&h(a.username||"")}catch(t){console.error("Error loading profile:",t)}}async function N(t){t.preventDefault(),y(!0),l(null);try{const{error:a}=await d.from("profiles").update({username:g}).eq("id",k.id);if(a)throw a;if(n){const{error:c}=await d.auth.updateUser({password:n});if(c)throw c}l({type:"success",text:"Profilo aggiornato con successo!"}),x("")}catch(a){l({type:"error",text:a.message||"Errore durante l'aggiornamento"})}finally{y(!1)}}async function j(){await d.auth.signOut(),window.location.href="/login"}return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 md:mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("a",{href:"/dashboard",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(_,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Il tuo Profilo"})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 md:px-4 py-2 rounded-lg transition-colors font-medium border border-transparent hover:border-red-100 dark:hover:border-red-900/30 text-sm md:text-base",children:[e.jsx(P,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Esci"})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(f,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),"Aspetto"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"light",icon:z,label:"Chiaro"},{id:"dark",icon:U,label:"Scuro"},{id:"system",icon:f,label:"Sistema"}].map(t=>e.jsxs("button",{onClick:()=>m(t.id),className:p("flex flex-col items-center gap-3 p-4 rounded-xl border-2 transition-all duration-200",o===t.id?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 font-medium":"border-gray-100 dark:border-gray-800 hover:border-gray-200 dark:hover:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"),children:[e.jsx(t.icon,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:t.label})]},t.id))})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-6 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(b,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),"Dati Personali"]}),i&&e.jsxs("div",{className:p("p-4 rounded-lg mb-6 flex items-center gap-2 text-sm",i.type==="success"?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"),children:[e.jsx("span",{children:i.type==="success"?"✅":"⚠️"}),i.text]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome Utente"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:t=>h(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Il tuo nome"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nuova Password ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(lascia vuoto per non cambiare)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",value:n,onChange:t=>x(t.target.value),minLength:6,className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"••••••••"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{type:"submit",disabled:u,className:"bg-indigo-600 dark:bg-indigo-500 text-white px-6 py-2.5 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition flex items-center gap-2 font-medium disabled:opacity-70 ml-auto",children:[u?e.jsx(M,{className:"w-5 h-5 animate-spin"}):e.jsx($,{className:"w-5 h-5"}),"Salva Modifiche"]})})]})]})]})}export{F as default};
